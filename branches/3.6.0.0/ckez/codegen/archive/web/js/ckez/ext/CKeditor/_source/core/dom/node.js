CKEDITOR.dom.node=function(a){if(a){switch(a.nodeType){case CKEDITOR.NODE_DOCUMENT:return new CKEDITOR.dom.document(a);case CKEDITOR.NODE_ELEMENT:return new CKEDITOR.dom.element(a);case CKEDITOR.NODE_TEXT:return new CKEDITOR.dom.text(a)}CKEDITOR.dom.domObject.call(this,a)}return this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject();CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(b,a){b.append(this,a);return b},clone:function(a,d){var c=this.$.cloneNode(a);var b=function(f){if(f.nodeType!=CKEDITOR.NODE_ELEMENT){return}if(!d){f.removeAttribute("id",false)}f.removeAttribute("data-cke-expando",false);if(a){var g=f.childNodes;for(var e=0;e<g.length;e++){b(g[e])}}};b(c);return new CKEDITOR.dom.node(c)},hasPrevious:function(){return !!this.$.previousSibling},hasNext:function(){return !!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(d){var b=[];var e=this.getDocument().$.documentElement;var c=this.$;while(c&&c!=e){var a=c.parentNode;if(a){b.unshift(this.getIndex.call({$:c},d))}c=a}return b},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(c){var b=this.$,a=0;while((b=b.previousSibling)){if(c&&b.nodeType==3&&(!b.nodeValue.length||(b.previousSibling&&b.previousSibling.nodeType==3))){continue}a++}return a},getNextSourceNode:function(a,c,f){if(f&&!f.call){var b=f;f=function(g){return !g.equals(b)}}var e=(!a&&this.getFirst&&this.getFirst()),d;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&f&&f(this,true)===false){return null}e=this.getNext()}while(!e&&(d=(d||this).getParent())){if(f&&f(d,true)===false){return null}e=d.getNext()}if(!e){return null}if(f&&f(e)===false){return null}if(c&&c!=e.type){return e.getNextSourceNode(false,c,f)}return e},getPreviousSourceNode:function(a,c,f){if(f&&!f.call){var b=f;f=function(g){return !g.equals(b)}}var e=(!a&&this.getLast&&this.getLast()),d;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&f&&f(this,true)===false){return null}e=this.getPrevious()}while(!e&&(d=(d||this).getParent())){if(f&&f(d,true)===false){return null}e=d.getPrevious()}if(!e){return null}if(f&&f(e)===false){return null}if(c&&e.type!=c){return e.getPreviousSourceNode(false,c,f)}return e},getPrevious:function(c){var b=this.$,a;do{b=b.previousSibling;a=b&&new CKEDITOR.dom.node(b)}while(a&&c&&!c(a));return a},getNext:function(c){var b=this.$,a;do{b=b.nextSibling;a=b&&new CKEDITOR.dom.node(b)}while(a&&c&&!c(a));return a},getParent:function(){var a=this.$.parentNode;return(a&&a.nodeType==1)?new CKEDITOR.dom.node(a):null},getParents:function(b){var c=this;var a=[];do{a[b?"push":"unshift"](c)}while((c=c.getParent()));return a},getCommonAncestor:function(a){if(a.equals(this)){return this}if(a.contains&&a.contains(this)){return a}var b=this.contains?this:this.getParent();do{if(b.contains(a)){return b}}while((b=b.getParent()));return null},getPosition:function(d){var e=this.$;var f=d.$;if(e.compareDocumentPosition){return e.compareDocumentPosition(f)}if(e==f){return CKEDITOR.POSITION_IDENTICAL}if(this.type==CKEDITOR.NODE_ELEMENT&&d.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(f)){return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING}if(f.contains(e)){return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}}if("sourceIndex" in e){return(e.sourceIndex<0||f.sourceIndex<0)?CKEDITOR.POSITION_DISCONNECTED:(e.sourceIndex<f.sourceIndex)?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}var b=this.getAddress(),a=d.getAddress(),g=Math.min(b.length,a.length);for(var c=0;c<=g-1;c++){if(b[c]!=a[c]){if(c<g){return b[c]<a[c]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}break}}return(b.length<a.length)?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(b,a){var c=this.$;if(!a){c=c.parentNode}while(c){if(c.nodeName&&c.nodeName.toLowerCase()==b){return new CKEDITOR.dom.node(c)}c=c.parentNode}return null},hasAscendant:function(b,a){var c=this.$;if(!a){c=c.parentNode}while(c){if(c.nodeName&&c.nodeName.toLowerCase()==b){return true}c=c.parentNode}return false},move:function(b,a){b.append(this.remove(),a)},remove:function(a){var c=this.$;var b=c.parentNode;if(b){if(a){for(var d;(d=c.firstChild);){b.insertBefore(c.removeChild(d),c)}}b.removeChild(c)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){var c;while(this.getFirst&&(c=this.getFirst())){if(c.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.ltrim(c.getText()),a=c.getLength();if(!b){c.remove();continue}else{if(b.length<a){c.split(a-b.length);this.$.removeChild(this.$.firstChild)}}}break}},rtrim:function(){var c;while(this.getLast&&(c=this.getLast())){if(c.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.rtrim(c.getText()),a=c.getLength();if(!b){c.remove();continue}else{if(b.length<a){c.split(b.length);this.$.lastChild.parentNode.removeChild(this.$.lastChild)}}}break}if(!CKEDITOR.env.ie&&!CKEDITOR.env.opera){c=this.$.lastChild;if(c&&c.type==1&&c.nodeName.toLowerCase()=="br"){c.parentNode.removeChild(c)}}},isReadOnly:function(){var a=this;while(a){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is("body")||!!a.data("cke-editable")){break}if(a.getAttribute("contentEditable")=="false"){return a}else{if(a.getAttribute("contentEditable")=="true"){break}}}a=a.getParent()}return false}});