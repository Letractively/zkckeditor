CKEDITOR.dialog.add("colordialog",function(b){var x=CKEDITOR.dom.element,g=CKEDITOR.document,j=CKEDITOR.tools,y=b.lang.colordialog;var r;var h={type:"html",html:"&nbsp;"};function p(){g.getById(n).removeStyle("background-color");r.getContentElement("picker","selectedColor").setValue("")}function q(z){if(!(z instanceof CKEDITOR.dom.event)){z=new CKEDITOR.dom.event(z)}var B=z.getTarget(),A;if(B.getName()=="a"&&(A=B.getChild(0).getHtml())){r.getContentElement("picker","selectedColor").setValue(A)}}function f(A){if(!(A instanceof CKEDITOR.dom.event)){A=A.data}var B=A.getTarget(),z;if(B.getName()=="a"&&(z=B.getChild(0).getHtml())){g.getById(m).setStyle("background-color",z);g.getById(e).setHtml(z)}}function i(){g.getById(m).removeStyle("background-color");g.getById(e).setHtml("&nbsp;")}var c=j.addFunction(i),d=q,t=CKEDITOR.tools.addFunction(d),a=f,l=i;var o=CKEDITOR.tools.addFunction(function(A){A=new CKEDITOR.dom.event(A);var z=A.getTarget();var C,B;var E=A.getKeystroke(),D=b.lang.dir=="rtl";switch(E){case 38:if((C=z.getParent().getParent().getPrevious())){B=C.getChild([z.getParent().getIndex(),0]);B.focus();l(A,z);a(A,B)}A.preventDefault();break;case 40:if((C=z.getParent().getParent().getNext())){B=C.getChild([z.getParent().getIndex(),0]);if(B&&B.type==1){B.focus();l(A,z);a(A,B)}}A.preventDefault();break;case 32:d(A);A.preventDefault();break;case D?37:39:if((C=z.getParent().getNext())){B=C.getChild(0);if(B.type==1){B.focus();l(A,z);a(A,B);A.preventDefault(true)}else{l(null,z)}}else{if((C=z.getParent().getParent().getNext())){B=C.getChild([0,0]);if(B&&B.type==1){B.focus();l(A,z);a(A,B);A.preventDefault(true)}else{l(null,z)}}}break;case D?39:37:if((C=z.getParent().getPrevious())){B=C.getChild(0);B.focus();l(A,z);a(A,B);A.preventDefault(true)}else{if((C=z.getParent().getParent().getPrevious())){B=C.getLast().getChild(0);B.focus();l(A,z);a(A,B);A.preventDefault(true)}else{l(null,z)}}break;default:return}});function s(){var E=["00","33","66","99","cc","ff"];function A(I,H){for(var G=I;G<I+3;G++){var J=u.$.insertRow(-1);for(var F=H;F<H+3;F++){for(var K=0;K<6;K++){C(J,"#"+E[F]+E[K]+E[G])}}}}function C(I,G){var F=new x(I.insertCell(-1));F.setAttribute("class","ColorCell");F.setStyle("background-color",G);F.setStyle("width","15px");F.setStyle("height","15px");var H=F.$.cellIndex+1+18*I.rowIndex;F.append(CKEDITOR.dom.element.createFromHtml('<a href="javascript: void(0);" role="option" aria-posinset="'+H+'" aria-setsize="'+13*18+'" style="cursor: pointer;display:block;width:100%;height:100% " title="'+CKEDITOR.tools.htmlEncode(G)+'" onkeydown="CKEDITOR.tools.callFunction( '+o+', event, this )" onclick="CKEDITOR.tools.callFunction('+t+', event, this ); return false;" tabindex="-1"><span class="cke_voice_label">'+G+"</span>&nbsp;</a>",CKEDITOR.document))}A(0,0);A(3,0);A(0,3);A(3,3);var z=u.$.insertRow(-1);for(var D=0;D<6;D++){C(z,"#"+E[D]+E[D]+E[D])}for(var B=0;B<12;B++){C(z,"#000000")}}var u=new x("table");s();var k=u.getHtml();var v=function(z){return CKEDITOR.tools.getNextId()+"_"+z},m=v("hicolor"),e=v("hicolortext"),n=v("selhicolor"),w=v("color_table_label");return{title:y.title,minWidth:360,minHeight:220,onLoad:function(){r=this},contents:[{id:"picker",label:y.title,accessKey:"I",elements:[{type:"hbox",padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:'<table role="listbox" aria-labelledby="'+w+'" onmouseout="CKEDITOR.tools.callFunction( '+c+' );">'+(!CKEDITOR.env.webkit?k:"")+'</table><span id="'+w+'" class="cke_voice_label">'+y.options+"</span>",onLoad:function(){var z=CKEDITOR.document.getById(this.domId);z.on("mouseover",f);CKEDITOR.env.webkit&&z.setHtml(k)},focus:function(){var z=this.getElement().getElementsByTag("a").getItem(0);z.focus()}},h,{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",html:"<span>"+y.highlight+'</span>												<div id="'+m+'" style="border: 1px solid; height: 74px; width: 74px;"></div>												<div id="'+e+'">&nbsp;</div><span>'+y.selected+'</span>												<div id="'+n+'" style="border: 1px solid; height: 20px; width: 74px;"></div>'},{type:"text",label:y.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 74px",onChange:function(){try{g.getById(n).setStyle("background-color",this.getValue())}catch(z){p()}}},h,{type:"button",id:"clear",style:"margin-top: 5px",label:y.clear,onClick:p}]}]}]}]}});